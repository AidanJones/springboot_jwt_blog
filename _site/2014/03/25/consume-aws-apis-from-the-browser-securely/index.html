<!DOCTYPE html>
<html class="header-dark">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="description" content="">
    
    <meta name="keywords" content="">
    

    <!-- <meta property="fb:admins" content="YOUR_FB_USER_ID" /> -->
<meta property="fb:app_id" content="534074790006350"/>
<meta property="og:title" content="Using AWS APIs without a server" />
<meta property="og:site_name" content="Auth0 - Blog" />
<meta property="og:url" content="https://auth0.com/blog/2014/03/25/consume-aws-apis-from-the-browser-securely/" />

<meta name="og:image" content="https://i.cloudup.com/Tty5socUdu.png">



<meta property="og:description" content="Company Updates & Technology Articles" />



<meta property="og:type" content="article">


<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">

<meta name="twitter:image" content="https://cdn.auth0.com/styleguide/latest/lib/logos/img/favicon.png">

<meta name="twitter:title" content="Using AWS APIs without a server">
<meta name="twitter:description" content="">
<meta name="twitter:creator" content="@auth0">

<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">


    <title>Using AWS APIs without a server</title>

    <script src="//use.typekit.net/tde2fii.js"></script>
    <script>try{Typekit.load();}catch(e){}</script>

    <script type="text/javascript" src="//cdn.auth0.com/js/lock-6.min.js"></script>
    <script type="text/javascript" src="//cdn.auth0.com/web-header/latest/standalone.min.js"></script>
    <link rel="stylesheet" href="//cdn.auth0.com/web-header/latest/standalone.min.css" />

    

    

    
    <link rel="canonical" href="/blog/2014/03/25/consume-aws-apis-from-the-browser-securely/" />
    

    <link rel="shortcut icon" href="//cdn.auth0.com/styleguide/latest/lib/logos/img/favicon.png">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/auth0">
    <link type="application/opensearchdescription+xml" rel="search" href="/osd.xml"/>

    <link href="//cdn.auth0.com/styleguide/latest/index.css" rel="stylesheet">

    <link rel="stylesheet" href="/blog/css/index.css" />

    <script type="text/javascript">
      var segmentKey =  'WqErZyd56ob3pmMDnko55hNgFt8B4Zox' ;
      !function(){var analytics=window.analytics=window.analytics||[];if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.0.0";
        analytics.load(segmentKey);
        analytics.page();
      }}();
    </script>
</head>
<body>
    
<!-- Facebook -->
<div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=534074790006350&version=v2.0";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>

<!-- Twitter -->
<script type="text/javascript">
  !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
</script>

<!-- Google+ -->
<!--
<script type="text/javascript">
  (function() {
    var po = document.createElement('script');
    po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(po, s);
  })();
</script>
-->


    <header class="site-header clearfix">
    </header>
    <script type="text/javascript">
      (function() {
        var header = new WebHeader({ base_url: 'https://auth0.com' });
        header.render('header.site-header');
      })();
    </script>

    
    <!-- Twitter Conversion -->
<script src="//platform.twitter.com/oct.js" type="text/javascript"></script>
<script type="text/javascript">
  twttr.conversion.trackPid('l4rua');
</script>

<noscript>
  <img height="1" width="1" style="display:none;" alt="" src="https://analytics.twitter.com/i/adsct?txn_id=l4rua&p_id=Twitter" />
  <img height="1" width="1" style="display:none;" alt="" src="//t.co/i/adsct?txn_id=l4rua&p_id=Twitter" />
</noscript>






<div class="banner banner-post" >
    <div class="container banner-container">
        <i class="icon-budicon-697 hide"></i>

        <h1><a href="/blog/">Blog</a></h1>

        













        <h2 class="entry-title"><a href="/blog/2014/03/25/consume-aws-apis-from-the-browser-securely/" title="Published: March 25, 2014">Using AWS APIs without a server</a></h2>

        

        <div class="post-info">
          <div class="author">
            <a href="http://twitter.com/woloski"><img src="https://secure.gravatar.com/avatar/0cd73f2f2f39709bd03646e9225cc3d3?s=60" width="27" height="27"> <span class="name">Matias Woloski</span></a>
          </div>

          <div class="date">
            <time datetime="March 25, 2014" class="published updated">March 25, 2014</time>
          </div>

          <div class="social-stats">
  <a href="#" data-url="https://auth0.com/blog/2014/03/25/consume-aws-apis-from-the-browser-securely/" data-type="twitter" data-count="true" class="network">
    
    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="22" height="22" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve">

    <path id="twitter-icon" d="M462,128.223c-15.158,6.724-31.449,11.269-48.547,13.31c17.449-10.461,30.854-27.025,37.164-46.764

      c-16.333,9.687-34.422,16.721-53.676,20.511c-15.418-16.428-37.386-26.691-61.698-26.691c-54.56,0-94.668,50.916-82.337,103.787

      c-70.25-3.524-132.534-37.177-174.223-88.314c-22.142,37.983-11.485,87.691,26.158,112.85c-13.854-0.438-26.891-4.241-38.285-10.574

      c-0.917,39.162,27.146,75.781,67.795,83.949c-11.896,3.237-24.926,3.978-38.17,1.447c10.754,33.58,41.972,58.018,78.96,58.699

      C139.604,378.282,94.846,390.721,50,385.436c37.406,23.982,81.837,37.977,129.571,37.977c156.932,0,245.595-132.551,240.251-251.435

      C436.339,160.061,450.668,145.174,462,128.223z"/>

    </svg>

  </a>

  <a href="#" data-url="https://auth0.com/blog/2014/03/25/consume-aws-apis-from-the-browser-securely/" data-type="linkedin" data-count="true" class="network">
    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="22" height="22" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve">

    <path id="linkedin-icon" d="M411.945,50h-312c-27.614,0-50,22.386-50,50v312c0,27.614,22.386,50,50,50h312

      c27.614,0,50-22.386,50-50V100C461.945,72.386,439.56,50,411.945,50z M180.996,392.99h-56.537V210.336h56.537V392.99z

       M152.457,186.417c-18.465,0-33.432-15.09-33.432-33.703c0-18.614,14.967-33.704,33.432-33.704c18.463,0,33.432,15.09,33.432,33.704

      C185.889,171.327,170.92,186.417,152.457,186.417z M392.865,392.99h-56.262c0,0,0-69.582,0-95.881

      c0-26.296-9.988-40.974-30.781-40.974c-22.629,0-34.453,15.289-34.453,40.974c0,28.133,0,95.881,0,95.881h-54.223V210.336h54.223

      v24.599c0,0,16.309-30.171,55.041-30.171s66.455,23.648,66.455,72.572C392.865,326.262,392.865,392.99,392.865,392.99z"/>

    </svg>
  </a>

  <a href="#" data-url="https://auth0.com/blog/2014/03/25/consume-aws-apis-from-the-browser-securely/" data-type="facebook" data-count="true" class="network">
    <svg width="17" height="17" viewBox="0 0 412 412" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
      <g id="facebook-icon" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">
          <path d="M283.80119,412 L361.995375,412 C389.611494,412 412,389.612167 412,361.995375 L412,50.0046252 C412,22.3885058 389.612167,0 361.995375,0 L50.0046252,0 C22.3885058,0 0,22.3878333 0,50.0046252 L0,361.995375 C0,389.611494 22.3878333,412 50.0046252,412 L219.907783,412 L219.907783,254.137637 L166.482996,254.137637 L166.482996,192.266054 L219.907783,192.266054 L219.907783,146.637452 C219.907783,93.6867027 252.247398,64.8530656 299.484232,64.8530656 C322.110827,64.8530656 341.559134,66.5376524 347.225329,67.2916602 L347.225329,122.6301 L314.462578,122.644417 C288.775412,122.644417 283.80119,134.851707 283.80119,152.764958 L283.80119,192.266054 L345.068293,192.266054 L337.089173,254.137637 L283.80119,254.137637 L283.80119,412 Z" id="Rectangle-1" fill="#000000" sketch:type="MSShapeGroup"></path>
      </g>
    </svg>
  </a>
</div>
        </div>

    </div>
</div>

<div id="container" class="container">
    <div class="blog-post blog-single">
        <div class="inner">
            <div class="entry-content" >
            <p><strong>TL;DR</strong>: you can access the AWS APIs securely (e.g. S3, DynamoDB, EC2) from browsers (i.e. using JavaScript) or native apps, without the need of a backend server. Live demo @ <a href="http://auth0.github.io/auth0-s3-sample/">http://auth0.github.io/auth0-s3-sample/</a></p>

<hr />

<p>In the past, we've talked about how it's becoming so much easier to write client side apps that are still fully secure thanks to JSON Web Tokens: (<a href="/blog/2014/01/07/angularjs-authentication-with-cookies-vs-token">Cookies vs Tokens</a>, <a href="/blog/2014/01/15/auth-with-socket-io/">Token-based auth with socket.io</a> and <a href="/blog/2014/01/27/ten-things-you-should-know-about-tokens-and-cookies/">10 things you should know about tokens</a>).</p>

<!-- more -->


<p>In this article, we will show how to use AWS APIs from the client side, without the need to go through a server. The process is illustrated in the following diagram:</p>

<div style="text-align: center"><img src="https://docs.google.com/drawings/d/1rSJuRdQFkLcKtz6pqcxwRxfzguj_YQs8TEfoCLSiRlk/pub?w=501&amp;h=568"></div>


<ol>
<li>The user logs in and gets a JSON Web Token (JWT)</li>
<li>Gets AWS Token (Temp Credentials) using the JWT</li>
<li>Call the AWS API using the the AWS Token</li>
</ol>


<p>We are assuming you have an AWS account and Auth0 account.</p>

<h2>1. The user logs in and gets a JWT</h2>

<p>First, we initialize the JavaScript login widget and call <code>.signin</code>.</p>

<pre><code>  var widget = new Auth0Widget({ domain: 'yours.auth0.com', clientID: 'your-client-id', callbackURL: 'your-callback-url' });

  widget.signin();
</code></pre>

<p>The login result comes in the <code>location.hash</code>. The <code>getProfile</code> method will return the profile and JWT and we store those in local storage.</p>

<pre><code>widget.getProfile(location.hash, function (err, profile, id_token) {
  store.set('profile', JSON.stringify(profile));
  store.set('id_token', id_token);

  location.href = 'files.html'
});
</code></pre>

<h2>2. Get AWS Temp Credentials using the JWT</h2>

<p>After the user is logged in, Auth0 will send you a JSON Web Token (JWT). We then use the <code>/delegation</code> endpoint in Auth0 to exchange the JWT (<code>id_token</code>) obtained in step 1 for an AWS token. Behind the scenes, the Auth0 server will call AWS IAM APIs to perform this.</p>

<p>Here's the code:</p>

<pre><code>  var aws_arns = {
      role: 'arn:aws:iam::account_number:role/role_name',
      principal: 'arn:aws:iam::account_number:saml-provider/provider_name'
  };

  var aws_creds;
  auth0.getDelegationToken('.. client_id ..', store.get('id_token'), aws_arns, function(err, result) {
     aws_creds = result.Credentials; // AWS temp credentials
  });
</code></pre>

<blockquote><p>The <code>role</code> and <code>principal</code> are values you get from AWS IAM console. You have to do a one-time configuration to add Auth0 as an identity provider, and create a role and a policy. More details here <a href="https://docs.auth0.com/aws-api-setup">https://docs.auth0.com/aws-api-setup</a>.</p></blockquote>

<p>As an example, this policy gives permission to do everything on an S3 folder under a bucket. The name of the folder gets resolved at runtime depending on the contents of the JSON Web Token. The <code>user_id</code> in the JWT will be replaced as the name of the folder (<code>${saml:sub}</code> is a placeholder for the <code>user_id</code>).</p>

<p><img src="https://cdn.auth0.com/docs/img/aws-api-setup-9.png" alt="" /></p>

<h3>3. Upload file using AWS Session Token</h3>

<p>Here we set the <code>bucket.config.credentials</code> with the AWS Token we've got on Step 2 (<code>aws_creds</code>) and call <code>putObject</code> using the <code>user_id</code> as part of the S3 path.</p>

<pre><code>bucket.config.credentials = new AWS.Credentials(aws_creds.AccessKeyId,
                                                aws_creds.SecretAccessKey,
                                                aws_creds.SessionToken);

bucket.putObject({ Key: folder_prefix + user_id + '/' + file.name,
                   ContentType: file.type,
                   Body: file,
                   ACL: 'private'}, callback);
</code></pre>

<p>We are using the <a href="https://github.com/aws/aws-sdk-js">AWS JavaScript SDK</a>.</p>

<p>Here is a short video showing the whole process:</p>

<div style="text-align: center">
<a href="http://cloudup.com/iC6DMMtQmRE" target="_new">
<video id="awsvideo" loop="" autostart="">
  <source src="http://i.cloudup.com/transcoded/nPO3q3LWIn.mp4">
  <img src="https://cloudup.com/iC6DMMtQmRE+">
</video>
</a>
</div>




<div class="try-banner try-code" style="margin: 0">
    <a href="https://github.com/auth0/auth0-s3-sample" target="_new" class="btn btn-default btn-lg"><i class=" icon-1392070209-icon-social-github icon"></i>Code</a>
    <a href="http://auth0.github.io/auth0-s3-sample/" target="_new" class="btn btn-default btn-lg"><i class=" icon-budicon-698 icon"></i>Demo</a>
</div>


<h2>AWS APIs supported</h2>

<p>This technique could be also used for any AWS API, besides S3:</p>

<ul>
<li><p><a href="http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/FGAC_DDB.html">Fine Grained Access Control with DynamoDB</a></p></li>
<li><p><a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/UsingIAM.html">Controlling Access to Amazon EC2 Resources</a></p></li>
</ul>


<p>For a complete list of AWS services theta support IAM policies see: <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/Using_SpecificProducts.html">http://docs.aws.amazon.com/IAM/latest/UserGuide/Using_SpecificProducts.html</a></p>

<p>Finally, AWS recently announced their support for <a href="http://docs.aws.amazon.com/STS/latest/UsingSTS/CreatingWIF.html">Creating Temporary Security Credentials for Mobile Apps using Google, Facebook or Amazon Login</a>. That works similarly to what we are showing here, however it only supports these 3 identity providers: Amazon, Facebook and Google. With Auth0 you can expand this to work with  any identity provider: your own username/passwords, enterprise credentials or a long list of social providers.</p>

<p>Tokens FTW!</p>

            </div>

            

            <div class="try-banner">
                <span>Try Auth0 for FREE</span>
                <a href="javascript:signup()" class="signup-button btn btn-success btn-lg">Create free Account</a>
            </div>

            

<p class="small-caps text-center">Recent Posts</p>

<div class="related-posts">

  

  

  <div class="entry-related">
    












  <a href="/blog/2015/05/04/design-at-auth0/" 
    style="
 
  background: #222229;
 
 
 
"
    class="entry-thumbnail">
    <img 
    style="
  
 
  
  max-width: 170%;
  
 
  
  top: 52%;
  
 
  
"
    src="http://assets.auth0.com/blog/design-process/badge.png"
    alt="Engineering the Design Process at Auth0">
  </a>


    <h2 class="entry-title"><a href="/blog/2015/05/04/design-at-auth0/" title="Published: May 04, 2015">Engineering the Design Process at Auth0</a></h2>
  </div>

  

  

  <div class="entry-related">
    












  <a href="/blog/2015/04/28/announcing-auth0-sso-dashboard/" 
    style="
 
 
 
"
    class="entry-thumbnail">
    <img 
    style="
  
  opacity: 0.8;
  
 
  
  max-width: 200%;
  
 
  
 
  
"
    src="https://cloudup.com/cfENOYpKxfL+"
    alt="Announcing the Auth0 Open Source Single-Sign-On Dashboard">
  </a>


    <h2 class="entry-title"><a href="/blog/2015/04/28/announcing-auth0-sso-dashboard/" title="Published: April 28, 2015">Announcing the Auth0 Open Source Single-Sign-On Dashboard</a></h2>
  </div>

  

  

  <div class="entry-related">
    












  <a href="/blog/2015/04/27/auth0-europe-launches/" 
    style="
 
 
 
"
    class="entry-thumbnail">
    <img 
    style="
  
 
  
  max-width: 155%;
  
 
  
 
  
"
    src="https://cldup.com/C76gL6oGIE.png"
    alt="Auth0 Europe Launches">
  </a>


    <h2 class="entry-title"><a href="/blog/2015/04/27/auth0-europe-launches/" title="Published: April 27, 2015">Auth0 Europe Launches</a></h2>
  </div>

</div>

            <div id="disqus_thread">
            </div>
        </div>
    </div>
    <br />
</div>

<g:plusone annotation="inline"></g:plusone>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'auth0blog'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="//disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



    <div class="container">
      <footer class="site-footer clearfix">
        <div class="logo"><img src=
        "https://cdn.auth0.com/styleguide/1.0.0/img/badge.png" width="30"></div>

        <div class="footer-grid">
          <div class="column">
            <div class="item">
              <h6>Product</h6>
            </div>

            <div class="item">
              <a href="/pricing">Pricing</a>
            </div>

            <div class="item">
              <a href="/why-auth0">Why Auth0</a>
            </div>

            <div class="item">
              <a href="/how-it-works">How It Works</a>
            </div>
          </div>

          <div class="column">
            <div class="item">
              <h6>Company</h6>
            </div>

            <div class="item">
              <a href="/about">About Us</a>
            </div>

            <div class="item">
              <a href="/blog">Blog</a>
            </div>

            <div class="item">
              <a href="/jobs">Jobs</a>
            </div>
          </div>

          <div class="column">
            <div class="item">
              <h6>Security</h6>
            </div>

            <div class="item">
              <a href="/availability-trust">Availability &amp; Trust</a>
            </div>

            <div class="item">
              <a href="/security">Security</a>
            </div>

            <div class="item">
              <a href="/whitehat">White Hat</a>
            </div>
          </div>

          <div class="column">
            <div class="item">
              <h6>Learn</h6>
            </div>

            <div class="item">
              <a href="/support">Help &amp; Support</a>
            </div>

            <div class="item">
              <a href="https://auth0.com/docs">Documentation</a>
            </div>

            <div class="item">
              <a href="/opensource">Open Source</a>
            </div>
          </div>

          <div class="column">
            <div class="item">
              <h6>Extend</h6>
            </div>

            <div class="item">
              <a href="/lock">Lock</a>
            </div>

            <div class="item">
              <a href="/wordpress">Wordpress</a>
            </div>

            <div class="item">
              <a href="https://auth0.com/docs/apiv2">API Explorer</a>
            </div>
          </div>

          <div class="contact">
            <div class="column">
              <div class="item">
                <h6>Contact</h6>
              </div>

              <div class="item">
                <a href="mailto:support@auth0.com">Email Us</a>
              </div>

              <div class="item">
                10777 Main Street<br>
                Suite 204<br>
                Bellevue, WA 98004
              </div>
            </div>

            <div class="column no-heading">
              <div class="item">
                <a href="tel:+18882352699">+1 (888) 235-2699</a>
              </div>

              <div class="item">
                <a href="tel:+14253126521">+1 (425) 312-6521</a>
              </div>
            </div>
          </div>
        </div>

        <div class="colophon">
          <div class="column">
            <div class="social">
              <div class="twitter">
                <iframe class="twitter" frameborder="0" scrolling="no" src=
                "//platform.twitter.com/widgets/follow_button.html?screen_name=auth0">
                </iframe>
              </div>

              <div class="facebook">
                <iframe class="facebook" frameborder="0" scrolling="no" src=
                "//www.facebook.com/plugins/like.php?href=https%3A%2F%2Ffacebook.com%2Fgetauth0&amp;width&amp;layout=button_count&amp;action=like&amp;show_faces=false&amp;show_count=false&amp;share=false&amp;height=21&amp;appId=507756515938786">
                </iframe>
              </div>
            </div>
          </div>

          <div class="column">
            <ul class="list-inline text-right">
              <li>
                <a href="/privacy">Privacy Policy</a>
              </li>

              <li>
                <a href="/terms">Terms of Service</a>
              </li>

              <li><span>© 2013-2015 Auth0 All Rights Reserved</span></li>
            </ul>
          </div>
        </div>
      </footer>
    </div>



    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script src="/blog/js/vendor/moment.min.js"></script>
    <script src="/blog/js/vendor/jquery.csbuttons.min.js"></script>
    <script type="text/javascript">
      (function () {
        var lock = window.lock = new Auth0Lock('zEYfpoFzUMEzilhkHilcWoNkrFfJ3hAI', 'auth0.auth0.com');
        var options = {
          callbackURL:    'https://manage.auth0.com/callback',
          dict: {
            signup: {
              footerText: 'By signing up, you agree to our <a href="/terms" target="_new">terms of service</a> and <a href="/privacy" target="_new">privacy policy</a>'
            }
          },
          icon: '//cdn.auth0.com/styleguide/latest/lib/logos/img/badge.png'
        };

        function getBasicInfo () {
          return {
            path: window.location.pathname,
            url: window.location.toString(),
            title: document.title,
            referrer: document.referrer,
            category: 'Lock',
            label: 'blog'
          }
        }

        lock.on('signup ready', function () {
          if (!window.analytics) return;
          window.analytics.track('open:signup', getBasicInfo());
        });

        lock.on('signin ready', function () {
          if (!window.analytics) return;
          window.analytics.track('open:signin', getBasicInfo());
        });

        lock.getClient().getSSOData(false, function (err, data) {
          if (!data || !data.sso) return;
          $('.login')
            .attr('href', 'https://manage.auth0.com')
            .html('Open Dashboard');
        });

        window.login = function login() {
          if (window.analytics) {
            window.analytics.track('click:signin', getBasicInfo());
          }
          lock.hide(function() {
            lock.show(options);
          });
        }

        window.signup = function() {
          if (window.analytics) {
            window.analytics.track('click:signup', getBasicInfo());
          }
          lock.hide(function() {
            lock.showSignup(options);
          });
        }
      })()
      
      $(function() {
        // Social Buttons
        $('.social-stats .network').cSButtons();

        // prettyPrint
        $('pre').addClass("prettyprint");

        // Force al content links to blank
        $('.entry-content a').each(function() {
          $(this).attr('target', '_blank');
        });

        $('.post-info time').each(function() {
          var $current = $(this);
          var dateString = $current.text();
          var diff = moment(dateString).diff(moment(new Date()), 'days');
          var dateFormat;

          dateFormat = moment(dateString).fromNow();

          if(diff > -10) {
            $current.text(dateFormat);
          }

          $current.addClass('rendered');
        });
      });

      $.fn.isOnScreen = function(){
        var win = $(window);
        var viewport = {
          top : win.scrollTop(),
          left : win.scrollLeft()
        };
        viewport.right = viewport.left + win.width();
        viewport.bottom = viewport.top + win.height();

        var bounds = win.offset();
        if (!bounds) return;

        bounds.right = bounds.left + win.outerWidth();
        bounds.bottom = bounds.top + win.outerHeight();

        return (!(viewport.right < bounds.left || viewport.left > bounds.right || viewport.bottom < bounds.top || viewport.top > bounds.bottom));
      };
    </script>

    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'auth0blog'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
</body>
</html>
